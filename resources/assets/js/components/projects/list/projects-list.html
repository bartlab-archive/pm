<div layout-gt-sm="row" layout-align="center start">
    <md-card flex-xs="100" flex-sm="100" flex-md="70" flex-gt-md="50">
        <!--<md-toolbar>-->
        <!--<div class="md-toolbar-tools">-->
        <!--<md-button-->
        <!--class="md-icon-button"-->
        <!--aria-label="New project"-->
        <!--ng-click="$ctrl.newProject()">-->
        <!--<md-icon>add</md-icon>-->
        <!--</md-button>-->
        <!--<h2>Projects</h2>-->
        <!--<span flex></span>-->
        <!--<md-switch class="md-body-1" ng-model="$ctrl.showClosed" md-invert aria-label="Show closed"-->
        <!--ng-change="$ctrl.load()"-->
        <!--ng-true-value="1" ng-false-value="0">-->
        <!--Show closed-->
        <!--</md-switch>-->
        <!--</div>-->
        <!--</md-toolbar>-->

        <md-card-header>
            <md-card-header-text>
                <span class="md-title">Projects</span>
            </md-card-header-text>

            <div flex></div>

            <md-switch class="md-body-1" ng-model="$ctrl.showClosed" md-invert aria-label="Show closed"
                       ng-change="$ctrl.load()"
                       ng-true-value="1" ng-false-value="0">
                Show closed
            </md-switch>

            <!--<md-button class="md-icon-button" ng-click="null">-->
            <!--<md-icon>more_vert</md-icon>-->
            <!--</md-button>-->

            <!--<md-menu>-->
            <!--<md-button class="md-icon-button" aria-label="User menu" ng-click="$ctrl.openMoreMenu($mdMenu, $event)">-->
            <!--<md-icon>more_vert</md-icon>-->
            <!--</md-button>-->
            <!--<md-menu-content width="4">-->
            <!--<md-menu-item>-->
            <!--<md-button>-->
            <!--<md-icon>mode_edit</md-icon>-->
            <!--Edit-->
            <!--</md-button>-->
            <!--</md-menu-item>-->

            <!--<md-menu-item>-->
            <!--<md-button>-->
            <!--<md-icon>timelapse</md-icon>-->
            <!--Log time-->
            <!--</md-button>-->
            <!--</md-menu-item>-->

            <!--<md-menu-item>-->
            <!--<md-button>-->
            <!--<md-icon>star_border</md-icon>-->
            <!--Watch-->
            <!--</md-button>-->
            <!--</md-menu-item>-->

            <!--<md-menu-item>-->
            <!--<md-button>-->
            <!--<md-icon>content_copy</md-icon>-->
            <!--Copy-->
            <!--</md-button>-->
            <!--</md-menu-item>-->

            <!--<md-menu-divider></md-menu-divider>-->

            <!--<md-menu-item>-->
            <!--<md-button>-->
            <!--<md-icon>delete</md-icon>-->
            <!--Delete-->
            <!--</md-button>-->
            <!--</md-menu-item>-->
            <!--</md-menu-content>-->
            <!--</md-menu>-->


        </md-card-header>

        <!--todo: convert this code into component-->
        <md-list>
            <div ng-repeat="project in $ctrl.list">
                <md-list-item class="md-3-line" ng-click="$ctrl.goto(project.identifier)">
                    <div class="md-list-item-text" layout="column">
                        <h3>{{ project.name }}</h3>
                        <p>{{ project.homepage }}</p>
                        <p class="md-truncate" ng-bind-html="$ctrl.makeHtml(project.description) | words: 50"></p>
                    </div>

                    <md-icon class="md-warn" ng-if="project.is_my === 1">star_rate</md-icon>
                    <md-icon>{{ project.is_public?'lock_open':'lock' }}</md-icon>
                    <md-icon ng-if="project.status === 5">close</md-icon>
                </md-list-item>

                <div ng-repeat="project2 in project.child_projects_recursive">
                    <md-list-item class="md-3-line" ng-click="$ctrl.goto(project2.identifier)">
                        <md-button class="md-icon-button">
                            <md-icon>subdirectory_arrow_right</md-icon>
                        </md-button>

                        <div class="md-list-item-text" layout="column">
                            <h3>{{ project2.name }}</h3>
                            <p>{{ project2.homepage }}</p>
                            <p class="md-truncate" ng-bind-html="$ctrl.makeHtml(project2.description) | words: 50"></p>
                        </div>

                        <md-icon class="md-warn" ng-if="project2.is_my === 1">star_rate</md-icon>
                        <md-icon>{{ project2.is_public?'lock_open':'lock' }}</md-icon>
                        <md-icon ng-if="project2.status === 5">close</md-icon>
                    </md-list-item>

                    <div ng-repeat="project3 in project2.child_projects_recursive">
                        <md-list-item class="md-3-line" ng-click="$ctrl.goto(project3.identifier)">
                            <md-button class="md-icon-button">
                                <md-icon aria-label=""></md-icon>
                            </md-button>
                            <md-button class="md-icon-button">
                                <md-icon>subdirectory_arrow_right</md-icon>
                            </md-button>

                            <div class="md-list-item-text" layout="column">
                                <h3>{{ project3.name }}</h3>
                                <p>{{ project3.homepage }}</p>
                                <p class="md-truncate"
                                   ng-bind-html="$ctrl.makeHtml(project3.description) | words: 50"></p>
                            </div>

                            <md-icon class="md-warn" ng-if="project3.is_my === 1">star_rate</md-icon>
                            <md-icon>{{ project3.is_public?'lock_open':'lock' }}</md-icon>
                            <md-icon ng-if="project3.status === 5">close</md-icon>
                        </md-list-item>
                    </div>
                </div>

                <md-divider ng-if="!$last"></md-divider>
            </div>
        </md-list>

        <md-card-actions layout="row" layout-align="center center">
            <md-button ng-click="null">
                <md-icon>rss_feed</md-icon>
                Atom
            </md-button>
        </md-card-actions>
    </md-card>
</div>